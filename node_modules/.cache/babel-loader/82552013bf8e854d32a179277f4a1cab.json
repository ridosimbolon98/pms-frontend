{"ast":null,"code":"import _regeneratorRuntime from\"D:/WEB/apache2/htdocs/pms/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"D:/WEB/apache2/htdocs/pms/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"D:/WEB/apache2/htdocs/pms/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/WEB/apache2/htdocs/pms/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import Moment from'moment';import Loader from'./Loader';import DataTable from'react-data-table-component';import{ToastContainer,toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Task=function Task(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),pending=_useState2[0],setPending=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tasks=_useState4[0],setTasks=_useState4[1];var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var navigate=useNavigate();var uuid='';var id='';if(user!==null){uuid=user.uuid;id=user.id;}var columns=[{name:'PROJECT',selector:function selector(row){return row.projectname;},sortable:true,wrap:true},{name:'TASKID',selector:function selector(row){return row.taskid;},sortable:true},{name:'TASK',selector:function selector(row){return row.task_name;},sortable:true},{name:'PROGRESS',selector:function selector(row){return row.progress;},sortable:true,wrap:true},{name:'STATUS',selector:function selector(row){return row.t_status;},sortable:true},{name:'START DATE',selector:function selector(row){return row.startdate;},sortable:true},{name:'DUE DATE',selector:function selector(row){return row.due_date;},sortable:true}];var getAllTask=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setTasks([]);_context.prev=1;_context.next=4;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/mytasks/\").concat(id));case 4:response=_context.sent;response.data.forEach(function(items,idx){var dataRow={id:idx,projectname:items.projectname,taskid:/*#__PURE__*/_jsx(Link,{to:\"../projects/detail/\".concat(items.projectid),children:items.taskid}),task_name:items.task_name.toUpperCase(),progress:/*#__PURE__*/_jsx(\"div\",{className:\"progress\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar bg-info\",role:\"progressbar\",style:{width:100+'%'},\"aria-valuenow\":items.progress,\"aria-valuemin\":0,\"aria-valuemax\":100,children:[items.progress,\"%\"]})}),t_status:items.t_status?'CLOSE':'OPEN',startdate:Moment(items.startdate).format('DD-MM-YYYY HH:mm'),due_date:Moment(items.due_date).format('DD-MM-YYYY HH:mm')};setTasks(function(oldArray){return[].concat(_toConsumableArray(oldArray),[dataRow]);});});_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);toast.error(/*#__PURE__*/_jsxs(\"small\",{children:[\"Gagal reload data task! msg: \",_context.t0]}),{theme:\"colored\"});setTimeout(function(){window.location.reload();},2000);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function getAllTask(){return _ref.apply(this,arguments);};}();useEffect(function(){var timeout=setTimeout(function(){getAllTask();setPending(false);},2000);return function(){return clearTimeout(timeout);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-sm-flex align-items-center justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 text-gray-800\",children:\"All My Tasks\"}),/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",children:\"Dashboard\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\",children:\"Task\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card shadow mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsx(DataTable,{title:\"Task List\",columns:columns,data:tasks,progressPending:pending,progressComponent:/*#__PURE__*/_jsx(Loader,{}),pagination:true})})})}),/*#__PURE__*/_jsx(ToastContainer,{icon:false,autoClose:3000})]});};export default Task;","map":{"version":3,"names":["React","useState","useEffect","useSelector","Link","useNavigate","axios","Moment","Loader","DataTable","ToastContainer","toast","Task","pending","setPending","tasks","setTasks","state","auth","user","navigate","uuid","id","columns","name","selector","row","projectname","sortable","wrap","taskid","task_name","progress","t_status","startdate","due_date","getAllTask","get","process","env","REACT_APP_API_URL","response","data","forEach","items","idx","dataRow","projectid","toUpperCase","width","format","oldArray","error","theme","setTimeout","window","location","reload","timeout","clearTimeout"],"sources":["D:/WEB/apache2/htdocs/pms/frontend/src/components/Task.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Moment from 'moment';\r\nimport Loader from './Loader';\r\nimport DataTable from 'react-data-table-component';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nconst Task = () => {\r\n  const [pending, setPending] = useState(true);\r\n  const [tasks, setTasks] = useState([]);\r\n  const { user } = useSelector((state) => state.auth);\r\n  const navigate = useNavigate();\r\n\r\n  let uuid = '';\r\n  let id = '';\r\n  if(user !== null){\r\n    uuid = user.uuid;\r\n    id = user.id;\r\n  }\r\n\r\n  const columns = [\r\n    {\r\n      name: 'PROJECT',\r\n      selector: row => row.projectname,\r\n      sortable: true,\r\n      wrap: true\r\n    },\r\n    {\r\n      name: 'TASKID',\r\n      selector: row => row.taskid,\r\n      sortable: true\r\n    },\r\n    {\r\n      name: 'TASK',\r\n      selector: row => row.task_name,\r\n      sortable: true\r\n    },\r\n    {\r\n      name: 'PROGRESS',\r\n      selector: row => row.progress,\r\n      sortable: true,\r\n      wrap: true\r\n    },\r\n    {\r\n      name: 'STATUS',\r\n      selector: row => row.t_status,\r\n      sortable: true\r\n    },\r\n    {\r\n      name: 'START DATE',\r\n      selector: row => row.startdate,\r\n      sortable: true\r\n    },\r\n    {\r\n      name: 'DUE DATE',\r\n      selector: row => row.due_date,\r\n      sortable: true\r\n    }\r\n  ];\r\n  \r\n  const getAllTask = async () => {\r\n    setTasks([]);\r\n    try {\r\n      let response = await axios.get(`${process.env.REACT_APP_API_URL}/mytasks/${id}`);\r\n      response.data.forEach((items,idx) => {\r\n        let dataRow = { \r\n          id: idx,\r\n          projectname: items.projectname, \r\n          taskid: <Link to={`../projects/detail/${items.projectid}`}>{items.taskid}</Link>, \r\n          task_name: items.task_name.toUpperCase(), \r\n          progress: <div className=\"progress\">\r\n                      <div className=\"progress-bar bg-info\" role=\"progressbar\" style={{width: 100+'%'}} aria-valuenow={items.progress} aria-valuemin={0} aria-valuemax={100}>{items.progress}%</div>\r\n                    </div>, \r\n          t_status: items.t_status ? 'CLOSE' : 'OPEN', \r\n          startdate: Moment(items.startdate).format('DD-MM-YYYY HH:mm'),\r\n          due_date: Moment(items.due_date).format('DD-MM-YYYY HH:mm') \r\n        };\r\n        setTasks(oldArray => [...oldArray,dataRow]);\r\n      });\r\n    } catch (error) {\r\n      toast.error(<small>Gagal reload data task! msg: {error}</small>, {\r\n        theme: \"colored\"\r\n      });\r\n      setTimeout(() => {\r\n        window.location.reload();\r\n      }, 2000);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n\t\t\tgetAllTask();\r\n\t\t\tsetPending(false);\r\n\t\t}, 2000);\r\n\t\treturn () => clearTimeout(timeout);\r\n  }, []);\r\n\r\n  \r\n  return (\r\n    <div className=\"container-fluid mt-4\">\r\n      {/* Page Heading */}\r\n      <div className=\"d-sm-flex align-items-center justify-content-between mb-2\">\r\n        <h1 className=\"h3 mb-3 text-gray-800\">All My Tasks</h1>\r\n        <nav aria-label=\"breadcrumb\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\"><a href=\"/dashboard\">Dashboard</a></li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">Task</li>\r\n          </ol>\r\n        </nav>\r\n      </div>\r\n      \r\n      <div className=\"card shadow mb-4\">\r\n        <div className=\"card-body\">\r\n          <div className=\"table-responsive\">\r\n\r\n          <DataTable\r\n            title=\"Task List\"\r\n            columns={columns}\r\n            data={tasks}\r\n            progressPending={pending}\r\n            progressComponent={<Loader />}\r\n            pagination\r\n          />\r\n        \r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <ToastContainer icon={false} autoClose={3000}/>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Task;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}