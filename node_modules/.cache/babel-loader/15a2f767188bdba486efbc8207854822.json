{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/**\r\n * @author Rido Martupa Simbolon\r\n */import React,{useState,useEffect}from'react';import{Link,useNavigate,useParams}from'react-router-dom';import axios from\"axios\";import SubTask from'./SubTask';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'../css/project.css';import'../css/dp.css';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TaskDetails=function TaskDetails(){var _useParams=useParams(),taskid=_useParams.taskid;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),taskDetail=_useState2[0],setTaskDetail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),taskName=_useState4[0],setTaskName=_useState4[1];var uuid='';var userid='';var role='';var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;if(user!==null){uuid=user.uuid;role=user.role;userid=user.id;}var getDetailTask=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/taskdetail/\").concat(taskid));case 3:response=_context.sent;setTaskDetail(response.data);setTaskName(response.data[0].task_name);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0.response){toast.error(/*#__PURE__*/_jsx(\"small\",{children:_context.t0.response.data.msg}),{theme:\"colored\"});}case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getDetailTask(){return _ref.apply(this,arguments);};}();useEffect(function(){getDetailTask();},[]);var updateTask=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.patch(\"\".concat(process.env.REACT_APP_API_URL,\"/taskupdate\"),{taskid:taskid,task_name:taskName});case 4:response=_context2.sent;if(response.status===200){toast.success(/*#__PURE__*/_jsxs(\"small\",{children:[\"Task berhasil diupdate. Msg: \",response.status,\" - \",response.msg]}),{theme:\"colored\"});}else{toast.error(/*#__PURE__*/_jsxs(\"small\",{children:[\"Task gagal diupdate. Msg: \",response.status,\" - \",response.msg]}),{theme:\"colored\"});}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);toast.error(/*#__PURE__*/_jsx(\"small\",{children:_context2.t0.response.data.msg}),{theme:\"colored\"});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function updateTask(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-sm-flex align-items-center justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 text-gray-800\",children:\"Task Details\"}),/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",children:\"Dashboard\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\",children:\"Task Details\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"my-2\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:updateTask,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-2 col-form-label\",children:\"Task \"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:taskName,onChange:function onChange(e){return setTaskName(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-2 col-form-label\",children:\"Task PIC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",disabled:true,value:taskDetail[0]&&taskDetail[0].name})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-2 col-form-label\",children:\"Sub Task\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:/*#__PURE__*/_jsx(SubTask,{taskid:taskid})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-2 col-form-label\",children:\"Action\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:role==='admin'?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-primary shadow\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil-square mr-2\"}),\"Update Task\"]})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-primary shadow\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil-square mr-2\"}),\"Update Task\"]})})})]})]})})})]}),/*#__PURE__*/_jsx(ToastContainer,{icon:false,autoClose:3000})]});};export default TaskDetails;","map":null,"metadata":{},"sourceType":"module"}