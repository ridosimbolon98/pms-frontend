{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/**\r\n * @author Rido Martupa Simbolon\r\n */import React,{useState,useEffect}from'react';import{Link,NavLink,useNavigate}from'react-router-dom';import axios from\"axios\";import Moment from'moment';import'../../css/project.css';import{ToastContainer,toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Users=function Users(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),konfPass=_useState10[0],setKonfPass=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),role=_useState12[0],setRole=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isValid=_useState14[0],setIsValid=_useState14[1];var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/users\"));case 2:response=_context.sent;setUsers(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();useEffect(function(){getUsers();},[]);// cek pass dan konfPass sudah sesuai\nvar cekPassKonf=function cekPassKonf(e){setKonfPass(e);password===e?setIsValid(true):setIsValid(false);};var saveUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();// submit user ke server\n_context2.prev=1;_context2.next=4;return axios.post(\"http://192.168.10.30:9000/create_user\",{name:name,email:email,password:password,confPassword:konfPass,role:role});case 4:response=_context2.sent;if(response.data.status===201){setName('');setEmail('');setPassword('');setKonfPass('');toast.success(/*#__PURE__*/_jsx(\"small\",{children:response.data.msg}),{theme:\"colored\"});setTimeout(function(){navigate('/users');},2000);}else if(response.data.status===200){toast.error(/*#__PURE__*/_jsx(\"small\",{children:response.data.msg}),{theme:\"colored\"});setTimeout(function(){navigate('/users');},2000);}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);if(_context2.t0.response){toast.error(/*#__PURE__*/_jsx(\"small\",{children:_context2.t0.response.data.msg}),{theme:\"colored\"});setTimeout(function(){navigate('/users');},3000);}case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function saveUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-sm-flex align-items-center justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 text-gray-800\",children:\"All Users\"}),/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(NavLink,{href:\"/dashboard\",children:\"Dashboard\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\",children:\"Users\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"my-1\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"d-sm-inline-block btn btn-sm btn-primary shadow-sm mb-3\",\"data-toggle\":\"modal\",\"data-target\":\"#newUser\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-square fa-sm text-white-50\"}),\" Create New User\"]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"CreatedAt\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:user.uuid}),/*#__PURE__*/_jsx(\"td\",{className:\"text-bold text-center\",children:/*#__PURE__*/_jsxs(Link,{className:\"text-lead toltip\",to:\"/users/detail/\".concat(user.uuid),children:[user.name,/*#__PURE__*/_jsx(\"small\",{className:\"tooltiptext\",children:\"click for detail task\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:user.email}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:user.role}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:Moment(user.createdAt).format('DD-MM-YYYY HH:mm:ss')}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-danger\",title:\"Reset Password User\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pen-square\"}),\" Reset\"]})})]},index);})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"newUser\",tabIndex:-1,role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",id:\"newUserModalLabel\",children:\"New User Account\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"x\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return saveUser(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Nama\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",\"aria-describedby\":\"emailHelp\",placeholder:\"silakan input nama anda\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email/Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"silakan input email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"input password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"konfirmasiPass\",children:\"Confirmation Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"konfirmasiPass\",placeholder:\"input konfirmasi password\",value:konfPass,onChange:function onChange(e){return cekPassKonf(e.target.value);}}),isValid?/*#__PURE__*/_jsx(\"small\",{id:\"note\",className:\"form-text text-success\",children:\"password dan konfirmasi password sama\"}):/*#__PURE__*/_jsx(\"small\",{id:\"note\",className:\"form-text text-danger\",children:\"password dan konfirmasi password tidak sama!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"konfirmasiPass\",children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",value:role,onChange:function onChange(e){return setRole(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"USER\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"ADMIN\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-primary my-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus-square\"}),\" Submit\"]})]})})]})})}),/*#__PURE__*/_jsx(ToastContainer,{icon:false,autoClose:3000})]});};export default Users;","map":null,"metadata":{},"sourceType":"module"}