{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import Moment from'moment';import Loader from'./Loader';import DataTable from'react-data-table-component';import{ToastContainer,toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Task=function Task(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),pending=_useState2[0],setPending=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tasks=_useState4[0],setTasks=_useState4[1];var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var navigate=useNavigate();var uuid='';var id='';if(user!==null){uuid=user.uuid;id=user.id;}var columns=[{name:'PROJECT',selector:function selector(row){return row.projectname;},sortable:true,wrap:true},{name:'TASKID',selector:function selector(row){return row.taskid;},sortable:true},{name:'TASK',selector:function selector(row){return row.task_name;},sortable:true},{name:'PROGRESS',selector:function selector(row){return row.progress;},sortable:true,wrap:true},{name:'STATUS',selector:function selector(row){return row.t_status;},sortable:true},{name:'START DATE',selector:function selector(row){return row.startdate;},sortable:true},{name:'DUE DATE',selector:function selector(row){return row.due_date;},sortable:true}];var getAllTask=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setTasks([]);_context.prev=1;_context.next=4;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/mytasks/\").concat(id));case 4:response=_context.sent;response.data.forEach(function(items,idx){var dataRow={id:idx,projectname:items.projectname,taskid:/*#__PURE__*/_jsx(Link,{to:\"../projects/detail/\".concat(items.projectid),children:items.taskid}),task_name:items.task_name.toUpperCase(),progress:/*#__PURE__*/_jsx(\"div\",{className:\"progress\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar bg-info\",role:\"progressbar\",style:{width:100+'%'},\"aria-valuenow\":items.progress,\"aria-valuemin\":0,\"aria-valuemax\":100,children:[items.progress,\"%\"]})}),t_status:items.t_status?'CLOSE':'OPEN',startdate:Moment(items.startdate).format('DD-MM-YYYY HH:mm'),due_date:Moment(items.due_date).format('DD-MM-YYYY HH:mm')};setTasks(function(oldArray){return[].concat(_toConsumableArray(oldArray),[dataRow]);});});_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);toast.error(/*#__PURE__*/_jsxs(\"small\",{children:[\"Gagal reload data task! msg: \",_context.t0]}),{theme:\"colored\"});setTimeout(function(){window.location.reload();},2000);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function getAllTask(){return _ref.apply(this,arguments);};}();useEffect(function(){var timeout=setTimeout(function(){getAllTask();setPending(false);},2000);return function(){return clearTimeout(timeout);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-sm-flex align-items-center justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 text-gray-800\",children:\"All My Tasks\"}),/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",children:\"Dashboard\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\",children:\"Task\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card shadow mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsx(DataTable,{title:\"Task List\",columns:columns,data:tasks,progressPending:pending,progressComponent:/*#__PURE__*/_jsx(Loader,{}),pagination:true})})})}),/*#__PURE__*/_jsx(ToastContainer,{icon:false,autoClose:3000})]});};export default Task;","map":null,"metadata":{},"sourceType":"module"}