{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/IT09/Music/pms/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/**\r\n * @author Rido Martupa Simbolon\r\n */import React,{useState,useEffect}from'react';import{Link,useNavigate,useParams}from'react-router-dom';import axios from\"axios\";import SubTask from'./SubTask';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'../css/project.css';import'../css/dp.css';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TaskDetails=function TaskDetails(){var _useParams=useParams(),taskid=_useParams.taskid;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),taskDetail=_useState2[0],setTaskDetail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),taskName=_useState4[0],setTaskName=_useState4[1];var uuid='';var userid='';var role='';var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;if(user!==null){uuid=user.uuid;role=user.role;userid=user.id;}var getDetailTask=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/taskdetail/\").concat(taskid));case 3:response=_context.sent;setTaskDetail(response.data);setTaskName(response.data[0].task_name);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0.response){toast.error(/*#__PURE__*/_jsx(\"small\",{children:_context.t0.response.data.msg}),{theme:\"colored\"});}case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getDetailTask(){return _ref.apply(this,arguments);};}();useEffect(function(){getDetailTask();},[]);var updateTask=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.patch(\"\".concat(process.env.REACT_APP_API_URL,\"/taskupdate\"),{taskid:taskid,task_name:taskName});case 4:response=_context2.sent;if(response.status===200){toast.success(/*#__PURE__*/_jsxs(\"small\",{children:[\"Task berhasil diupdate. Msg: \",response.status,\" - \",response.msg]}),{theme:\"colored\"});}else{toast.error(/*#__PURE__*/_jsxs(\"small\",{children:[\"Task gagal diupdate. Msg: \",response.status,\" - \",response.msg]}),{theme:\"colored\"});}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);toast.error(/*#__PURE__*/_jsx(\"small\",{children:_context2.t0.response.data.msg}),{theme:\"colored\"});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function updateTask(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-sm-flex align-items-center justify-content-between mb-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 text-gray-800\",children:\"Task Details\"}),/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",children:\"Dashboard\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",\"aria-current\":\"page\",children:\"Task Details\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"my-2\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:updateTask,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-2 col-form-label\",children:\"Task \"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:taskName,onChange:function onChange(e){return setTaskName(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-2 col-form-label\",children:\"Task PIC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",disabled:true,value:taskDetail[0]&&taskDetail[0].name})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-2 col-form-label\",children:\"Sub Task\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:/*#__PURE__*/_jsx(SubTask,{taskid:taskid})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-2 col-form-label\",children:\"Action\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:role==='admin'?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-primary shadow\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil-square mr-2\"}),\"Update Task\"]})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-primary shadow\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil-square mr-2\"}),\"Update Task\"]})})})]})]})})})]}),/*#__PURE__*/_jsx(ToastContainer,{icon:false,autoClose:3000})]});};export default TaskDetails;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useParams","axios","SubTask","ToastContainer","toast","useSelector","TaskDetails","taskid","taskDetail","setTaskDetail","taskName","setTaskName","uuid","userid","role","state","auth","user","id","getDetailTask","get","process","env","REACT_APP_API_URL","response","data","task_name","error","msg","theme","updateTask","e","preventDefault","patch","status","success","target","value","name"],"sources":["C:/Users/IT09/Music/pms/frontend/src/components/TaskDetails.jsx"],"sourcesContent":["/**\r\n * @author Rido Martupa Simbolon\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useParams } from 'react-router-dom';\r\nimport axios from \"axios\";\r\nimport SubTask from './SubTask';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport '../css/project.css';\r\nimport '../css/dp.css';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst TaskDetails = () => {\r\n  const { taskid } = useParams(); \r\n  const [taskDetail, setTaskDetail] = useState([]);\r\n  const [taskName, setTaskName] = useState(\"\");\r\n  let uuid = '';\r\n  let userid = '';\r\n  let role = '';\r\n\r\n  const {user} = useSelector((state) => state.auth);\r\n  if(user !== null){\r\n    uuid = user.uuid;\r\n    role = user.role;\r\n    userid = user.id;\r\n  }\r\n\r\n  const getDetailTask = async() => {\r\n    try {\r\n      const response = await axios.get(`${process.env.REACT_APP_API_URL}/taskdetail/${taskid}`);\r\n      setTaskDetail(response.data);\r\n      setTaskName(response.data[0].task_name);\r\n    } catch (error) {\r\n      if (error.response) {\r\n        toast.error(<small>{error.response.data.msg}</small>, {\r\n          theme: \"colored\"\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getDetailTask();\r\n  }, []);\r\n\r\n  const updateTask = async(e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.patch(`${process.env.REACT_APP_API_URL}/taskupdate`, {\r\n        taskid: taskid,\r\n        task_name: taskName\r\n      });\r\n      if (response.status === 200) {\r\n        toast.success(<small>Task berhasil diupdate. Msg: {response.status} - {response.msg}</small>, {\r\n          theme: \"colored\"\r\n        });\r\n      } else {\r\n        toast.error(<small>Task gagal diupdate. Msg: {response.status} - {response.msg}</small>, {\r\n          theme: \"colored\"\r\n        });\r\n      }\r\n    } catch (error) {\r\n      toast.error(<small>{error.response.data.msg}</small>, {\r\n        theme: \"colored\"\r\n      });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container-fluid mt-4\">\r\n        {/* Page Heading */}\r\n        <div className=\"d-sm-flex align-items-center justify-content-between mb-2\">\r\n          <h1 className=\"h3 mb-3 text-gray-800\">Task Details</h1>\r\n          <nav aria-label=\"breadcrumb\">\r\n            <ol className=\"breadcrumb\">\r\n              <li className=\"breadcrumb-item\"><a href=\"/dashboard\">Dashboard</a></li>\r\n              <li className=\"breadcrumb-item active\" aria-current=\"page\">Task Details</li>\r\n            </ol>\r\n          </nav>\r\n        </div>\r\n        <div className=\"card card-body\">\r\n          <div className=\"my-2\">\r\n            <form onSubmit={updateTask}>\r\n              <div className=\"form-group row\">\r\n                <label className=\"col-sm-2 col-form-label\">Task </label>\r\n                <div className=\"col-sm-10\">\r\n                  <input type=\"text\" className=\"form-control\" value={taskName} onChange={(e) => setTaskName(e.target.value)} />\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group row\">\r\n                <label className=\"col-sm-2 col-form-label\">Task PIC</label>\r\n                <div className=\"col-sm-10\">\r\n                  <input type=\"text\" className=\"form-control\" disabled value={taskDetail[0] && taskDetail[0].name } />\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group row\">\r\n                <label className=\"col-sm-2 col-form-label\">Sub Task</label>\r\n                <div className=\"col-sm-10\">\r\n                  <SubTask taskid={taskid} />\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group row\">\r\n                <label className=\"col-sm-2 col-form-label\">Action</label>\r\n                <div className=\"col-sm-10\">\r\n                  { \r\n                    role === 'admin' ?\r\n                    <>\r\n                      <button type=\"submit\" className=\"btn btn-primary shadow\">\r\n                        <i className=\"fa fa-pencil-square mr-2\"></i>\r\n                        Update Task \r\n                      </button>\r\n                    </>\r\n                    :\r\n                    <>\r\n                      <button type=\"submit\" className=\"btn btn-primary shadow\">\r\n                        <i className=\"fa fa-pencil-square mr-2\"></i>\r\n                        Update Task \r\n                      </button>\r\n                    </>\r\n                  }\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ToastContainer icon={false} autoClose={3000}/>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TaskDetails;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}